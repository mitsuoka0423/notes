---
title: "Netlify Functionsã§Steinã‚’å‹•ã‹ã™ãƒ¡ãƒ¢"
emoji: "ğŸ“‘"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["JavaScript", "Netlify", "NetlifyFunctions", "Stein", "Googleã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆ"]
published: true
---

Netlify Functions + Steinã‚’å‹•ã‹ã™ã¨ãã«ãƒãƒã£ãŸãƒ¡ãƒ¢ã§ã™ã€‚

# ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰

https://github.com/tmitsuoka0423/netlify-functions-stein-sample

# ãƒãƒã£ãŸã¨ã“ã‚

## Cannot read property 'endsWith' of undefined

**è§£æ±ºç­–**

ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã®å¼•æ•°ã‚’ãƒã‚§ãƒƒã‚¯ã€‚
`null`ã¾ãŸã¯`undefined`ã«ãªã£ã¦ã„ã‚‹å¯èƒ½æ€§ã‚ã‚Šã€‚

**ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸**

```
undefined ERROR Uncaught Exception {
  "errorType":"TypeError",
  "errorMessage":"Cannot read property 'endsWith' of undefined",
  "stack":["TypeError: Cannot read property 'endsWith' of undefined",
  "    at new SteinStore (/var/task/src/node_modules/stein-js-client/index.js:7:25)",
  "    at Object.<anonymous> (/var/task/src/functions/read.js:2:15)",
  "    at Module._compile (internal/modules/cjs/loader.js:1015:30)",
  "    at Object.Module._extensions..js (internal/modules/cjs/loader.js:1035:10)",
  "    at Module.load (internal/modules/cjs/loader.js:879:32)",
  "    at Function.Module._load (internal/modules/cjs/loader.js:724:14)",
  "    at Module.require (internal/modules/cjs/loader.js:903:19)",
  "    at require (internal/modules/cjs/helpers.js:74:18)",
  "    at Object.<anonymous> (/var/task/read.js:1:18)",
  "    at Module._compile (internal/modules/cjs/loader.js:1015:30)"]
  }
```

`at new SteinStore (/var/task/src/node_modules/stein-js-client/index.js:7:25)`ã¨ã®ã“ã¨ãªã®ã§ã€
[stein-js-client/index.jsã®7è¡Œç›®](https://github.com/SteinHQ/JS-Client/blob/master/index.js#L7)ã‚’è¦‹ã¦ã¿ã‚‹ã€‚

```javascript
this.url = storageURL.endsWith("/") ? storageURL : storageURL + "/";
```

`storageURL`ãŒç©ºã«ãªã£ã¦ã„ã‚‹å¯èƒ½æ€§ãŒé«˜ã„ã€‚
